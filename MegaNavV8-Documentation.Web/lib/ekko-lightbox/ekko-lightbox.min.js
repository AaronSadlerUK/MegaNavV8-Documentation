/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/ekko-lightbox@5.3.0/ekko-lightbox.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
const Lightbox=(t=>{const e="ekkoLightbox",i=t.fn[e],s={title:"",footer:"",maxWidth:9999,maxHeight:9999,showArrows:!0,wrapping:!0,type:null,alwaysShowClose:!1,loadingMessage:'<div class="ekko-lightbox-loader"><div><div></div><div></div></div></div>',leftArrow:"<span>&#10094;</span>",rightArrow:"<span>&#10095;</span>",strings:{close:"Close",fail:"Failed to load image:",type:"Could not detect remote target type. Force the type using data-type"},doc:document,onShow(){},onShown(){},onHide(){},onHidden(){},onNavigate(){},onContentLoaded(){}};class o{static get Default(){return s}constructor(e,i){this._config=t.extend({},s,i),this._$modalArrows=null,this._galleryIndex=0,this._galleryName=null,this._padding=null,this._border=null,this._titleIsShown=!1,this._footerIsShown=!1,this._wantedWidth=0,this._wantedHeight=0,this._touchstartX=0,this._touchendX=0,this._modalId=`ekkoLightbox-${Math.floor(1e3*Math.random()+1)}`,this._$element=e instanceof jQuery?e:t(e),this._isBootstrap3=3==t.fn.modal.Constructor.VERSION[0];let o=`<h4 class="modal-title">${this._config.title||"&nbsp;"}</h4>`,a=`<button type="button" class="close" data-dismiss="modal" aria-label="${this._config.strings.close}"><span aria-hidden="true">&times;</span></button>`,h=`<div class="modal-dialog" role="document"><div class="modal-content">${`<div class="modal-header${this._config.title||this._config.alwaysShowClose?"":" hide"}">`+(this._isBootstrap3?a+o:o+a)+"</div>"}<div class="modal-body"><div class="ekko-lightbox-container"><div class="ekko-lightbox-item fade in show"></div><div class="ekko-lightbox-item fade"></div></div></div>${`<div class="modal-footer${this._config.footer?"":" hide"}">${this._config.footer||"&nbsp;"}</div>`}</div></div>`;t(this._config.doc.body).append(`<div id="${this._modalId}" class="ekko-lightbox modal fade" tabindex="-1" tabindex="-1" role="dialog" aria-hidden="true">${h}</div>`),this._$modal=t(`#${this._modalId}`,this._config.doc),this._$modalDialog=this._$modal.find(".modal-dialog").first(),this._$modalContent=this._$modal.find(".modal-content").first(),this._$modalBody=this._$modal.find(".modal-body").first(),this._$modalHeader=this._$modal.find(".modal-header").first(),this._$modalFooter=this._$modal.find(".modal-footer").first(),this._$lightboxContainer=this._$modalBody.find(".ekko-lightbox-container").first(),this._$lightboxBodyOne=this._$lightboxContainer.find("> div:first-child").first(),this._$lightboxBodyTwo=this._$lightboxContainer.find("> div:last-child").first(),this._border=this._calculateBorders(),this._padding=this._calculatePadding(),this._galleryName=this._$element.data("gallery"),this._galleryName&&(this._$galleryItems=t(document.body).find(`*[data-gallery="${this._galleryName}"]`),this._galleryIndex=this._$galleryItems.index(this._$element),t(document).on("keydown.ekkoLightbox",this._navigationalBinder.bind(this)),this._config.showArrows&&this._$galleryItems.length>1&&(this._$lightboxContainer.append(`<div class="ekko-lightbox-nav-overlay"><a href="#">${this._config.leftArrow}</a><a href="#">${this._config.rightArrow}</a></div>`),this._$modalArrows=this._$lightboxContainer.find("div.ekko-lightbox-nav-overlay").first(),this._$lightboxContainer.on("click","a:first-child",t=>(t.preventDefault(),this.navigateLeft())),this._$lightboxContainer.on("click","a:last-child",t=>(t.preventDefault(),this.navigateRight())),this.updateNavigation())),this._$modal.on("show.bs.modal",this._config.onShow.bind(this)).on("shown.bs.modal",()=>(this._toggleLoading(!0),this._handle(),this._config.onShown.call(this))).on("hide.bs.modal",this._config.onHide.bind(this)).on("hidden.bs.modal",()=>(this._galleryName&&(t(document).off("keydown.ekkoLightbox"),t(window).off("resize.ekkoLightbox")),this._$modal.remove(),this._config.onHidden.call(this))).modal(this._config),t(window).on("resize.ekkoLightbox",()=>{this._resize(this._wantedWidth,this._wantedHeight)}),this._$lightboxContainer.on("touchstart",()=>{this._touchstartX=event.changedTouches[0].screenX}).on("touchend",()=>{this._touchendX=event.changedTouches[0].screenX,this._swipeGesure()})}element(){return this._$element}modal(){return this._$modal}navigateTo(e){if(e<0||e>this._$galleryItems.length-1)return this;this._galleryIndex=e,this.updateNavigation(),this._$element=t(this._$galleryItems.get(this._galleryIndex)),this._handle()}navigateLeft(){if(this._$galleryItems&&1!==this._$galleryItems.length){if(0===this._galleryIndex){if(!this._config.wrapping)return;this._galleryIndex=this._$galleryItems.length-1}else this._galleryIndex--;return this._config.onNavigate.call(this,"left",this._galleryIndex),this.navigateTo(this._galleryIndex)}}navigateRight(){if(this._$galleryItems&&1!==this._$galleryItems.length){if(this._galleryIndex===this._$galleryItems.length-1){if(!this._config.wrapping)return;this._galleryIndex=0}else this._galleryIndex++;return this._config.onNavigate.call(this,"right",this._galleryIndex),this.navigateTo(this._galleryIndex)}}updateNavigation(){if(!this._config.wrapping){let t=this._$lightboxContainer.find("div.ekko-lightbox-nav-overlay");0===this._galleryIndex?t.find("a:first-child").addClass("disabled"):t.find("a:first-child").removeClass("disabled"),this._galleryIndex===this._$galleryItems.length-1?t.find("a:last-child").addClass("disabled"):t.find("a:last-child").removeClass("disabled")}}close(){return this._$modal.modal("hide")}_navigationalBinder(t){return 39===(t=t||window.event).keyCode?this.navigateRight():37===t.keyCode?this.navigateLeft():void 0}_detectRemoteType(t,e){return!(e=e||!1)&&this._isImage(t)&&(e="image"),!e&&this._getYoutubeId(t)&&(e="youtube"),!e&&this._getVimeoId(t)&&(e="vimeo"),!e&&this._getInstagramId(t)&&(e="instagram"),(!e||["image","youtube","vimeo","instagram","video","url"].indexOf(e)<0)&&(e="url"),e}_isImage(t){return t&&t.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg)((\?|#).*)?$)/i)}_containerToUse(){let t=this._$lightboxBodyTwo,e=this._$lightboxBodyOne;return this._$lightboxBodyTwo.hasClass("in")&&(t=this._$lightboxBodyOne,e=this._$lightboxBodyTwo),e.removeClass("in show"),setTimeout(()=>{this._$lightboxBodyTwo.hasClass("in")||this._$lightboxBodyTwo.empty(),this._$lightboxBodyOne.hasClass("in")||this._$lightboxBodyOne.empty()},500),t.addClass("in show"),t}_handle(){let t=this._containerToUse();this._updateTitleAndFooter();let e=this._$element.attr("data-remote")||this._$element.attr("href"),i=this._detectRemoteType(e,this._$element.attr("data-type")||!1);if(["image","youtube","vimeo","instagram","video","url"].indexOf(i)<0)return this._error(this._config.strings.type);switch(i){case"image":this._preloadImage(e,t),this._preloadImageByIndex(this._galleryIndex,3);break;case"youtube":this._showYoutubeVideo(e,t);break;case"vimeo":this._showVimeoVideo(this._getVimeoId(e),t);break;case"instagram":this._showInstagramVideo(this._getInstagramId(e),t);break;case"video":this._showHtml5Video(e,t);break;default:this._loadRemoteContent(e,t)}return this}_getYoutubeId(t){if(!t)return!1;let e=t.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/);return!(!e||11!==e[2].length)&&e[2]}_getVimeoId(t){return!!(t&&t.indexOf("vimeo")>0)&&t}_getInstagramId(t){return!!(t&&t.indexOf("instagram")>0)&&t}_toggleLoading(e){return(e=e||!1)?(this._$modalDialog.css("display","none"),this._$modal.removeClass("in show"),t(".modal-backdrop").append(this._config.loadingMessage)):(this._$modalDialog.css("display","block"),this._$modal.addClass("in show"),t(".modal-backdrop").find(".ekko-lightbox-loader").remove()),this}_calculateBorders(){return{top:this._totalCssByAttribute("border-top-width"),right:this._totalCssByAttribute("border-right-width"),bottom:this._totalCssByAttribute("border-bottom-width"),left:this._totalCssByAttribute("border-left-width")}}_calculatePadding(){return{top:this._totalCssByAttribute("padding-top"),right:this._totalCssByAttribute("padding-right"),bottom:this._totalCssByAttribute("padding-bottom"),left:this._totalCssByAttribute("padding-left")}}_totalCssByAttribute(t){return parseInt(this._$modalDialog.css(t),10)+parseInt(this._$modalContent.css(t),10)+parseInt(this._$modalBody.css(t),10)}_updateTitleAndFooter(){let t=this._$element.data("title")||"",e=this._$element.data("footer")||"";return this._titleIsShown=!1,t||this._config.alwaysShowClose?(this._titleIsShown=!0,this._$modalHeader.css("display","").find(".modal-title").html(t||"&nbsp;")):this._$modalHeader.css("display","none"),this._footerIsShown=!1,e?(this._footerIsShown=!0,this._$modalFooter.css("display","").html(e)):this._$modalFooter.css("display","none"),this}_showYoutubeVideo(t,e){let i=this._getYoutubeId(t),s=t.indexOf("&")>0?t.substr(t.indexOf("&")):"",o=this._$element.data("width")||560,a=this._$element.data("height")||o/(560/315);return this._showVideoIframe(`//www.youtube.com/embed/${i}?badge=0&autoplay=1&html5=1${s}`,o,a,e)}_showVimeoVideo(t,e){let i=this._$element.data("width")||500,s=this._$element.data("height")||i/(560/315);return this._showVideoIframe(t+"?autoplay=1",i,s,e)}_showInstagramVideo(t,e){let i=this._$element.data("width")||612,s=i+80;return t="/"!==t.substr(-1)?t+"/":t,e.html(`<iframe width="${i}" height="${s}" src="${t}embed/" frameborder="0" allowfullscreen></iframe>`),this._resize(i,s),this._config.onContentLoaded.call(this),this._$modalArrows&&this._$modalArrows.css("display","none"),this._toggleLoading(!1),this}_showVideoIframe(t,e,i,s){return i=i||e,s.html(`<div class="embed-responsive embed-responsive-16by9"><iframe width="${e}" height="${i}" src="${t}" frameborder="0" allowfullscreen class="embed-responsive-item"></iframe></div>`),this._resize(e,i),this._config.onContentLoaded.call(this),this._$modalArrows&&this._$modalArrows.css("display","none"),this._toggleLoading(!1),this}_showHtml5Video(t,e){let i=this._$element.data("width")||560,s=this._$element.data("height")||i/(560/315);return e.html(`<div class="embed-responsive embed-responsive-16by9"><video width="${i}" height="${s}" src="${t}" preload="auto" autoplay controls class="embed-responsive-item"></video></div>`),this._resize(i,s),this._config.onContentLoaded.call(this),this._$modalArrows&&this._$modalArrows.css("display","none"),this._toggleLoading(!1),this}_loadRemoteContent(e,i){let s=this._$element.data("width")||560,o=this._$element.data("height")||560,a=this._$element.data("disableExternalCheck")||!1;return this._toggleLoading(!1),a||this._isExternal(e)?(i.html(`<iframe src="${e}" frameborder="0" allowfullscreen></iframe>`),this._config.onContentLoaded.call(this)):i.load(e,t.proxy(()=>this._$element.trigger("loaded.bs.modal"))),this._$modalArrows&&this._$modalArrows.css("display","none"),this._resize(s,o),this}_isExternal(t){let e=t.match(/^([^:\/?#]+:)?(?:\/\/([^\/?#]*))?([^?#]+)?(\?[^#]*)?(#.*)?/);return"string"==typeof e[1]&&e[1].length>0&&e[1].toLowerCase()!==location.protocol||"string"==typeof e[2]&&e[2].length>0&&e[2].replace(new RegExp(`:(${{"http:":80,"https:":443}[location.protocol]})?$`),"")!==location.host}_error(t){return console.error(t),this._containerToUse().html(t),this._resize(300,300),this}_preloadImageByIndex(e,i){if(!this._$galleryItems)return;let s=t(this._$galleryItems.get(e),!1);if(void 0===s)return;let o=s.attr("data-remote")||s.attr("href");return("image"===s.attr("data-type")||this._isImage(o))&&this._preloadImage(o,!1),i>0?this._preloadImageByIndex(e+1,i-1):void 0}_preloadImage(e,i){i=i||!1;let s=new Image;if(i){let o=setTimeout(()=>{i.append(this._config.loadingMessage)},200);s.onload=(()=>{o&&clearTimeout(o),o=null;let e=t("<img />");return e.attr("src",s.src),e.addClass("img-fluid"),e.css("width","100%"),i.html(e),this._$modalArrows&&this._$modalArrows.css("display",""),this._resize(s.width,s.height),this._toggleLoading(!1),this._config.onContentLoaded.call(this)}),s.onerror=(()=>(this._toggleLoading(!1),this._error(this._config.strings.fail+`  ${e}`)))}return s.src=e,s}_swipeGesure(){return this._touchendX<this._touchstartX?this.navigateRight():this._touchendX>this._touchstartX?this.navigateLeft():void 0}_resize(e,i){i=i||e,this._wantedWidth=e,this._wantedHeight=i;let s=e/i,o=this._padding.left+this._padding.right+this._border.left+this._border.right,a=this._config.doc.body.clientWidth>575?20:0,h=this._config.doc.body.clientWidth>575?0:20,l=Math.min(e+o,this._config.doc.body.clientWidth-a,this._config.maxWidth);e+o>l?(i=(l-o-h)/s,e=l):e+=o;let d=0,n=0;this._footerIsShown&&(n=this._$modalFooter.outerHeight(!0)||55),this._titleIsShown&&(d=this._$modalHeader.outerHeight(!0)||67);let r=this._padding.top+this._padding.bottom+this._border.bottom+this._border.top,g=parseFloat(this._$modalDialog.css("margin-top"))+parseFloat(this._$modalDialog.css("margin-bottom")),_=Math.min(i,t(window).height()-r-g-d-n,this._config.maxHeight-r-d-n);i>_&&(e=Math.ceil(_*s)+o),this._$lightboxContainer.css("height",_),this._$modalDialog.css("flex",1).css("maxWidth",e);let m=this._$modal.data("bs.modal");if(m)try{m._handleUpdate()}catch(t){m.handleUpdate()}return this}static _jQueryInterface(e){return e=e||{},this.each(()=>{let i=t(this),s=t.extend({},o.Default,i.data(),"object"==typeof e&&e);new o(this,s)})}}return t.fn[e]=o._jQueryInterface,t.fn[e].Constructor=o,t.fn[e].noConflict=(()=>(t.fn[e]=i,o._jQueryInterface)),o})(jQuery);export default Lightbox;
//# sourceMappingURL=/sm/c0aecbfd1a8efd616fb8d2f56b3abe23bf64bc8df170a81f1ab2fe9911d6210a.map